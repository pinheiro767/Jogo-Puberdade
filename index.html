<!DOCTYPE html>
<html lang="pt-BR">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Jornada da Puberdade: Conhecendo as transformaรงรตes do meu corpo</title>
ย ย <link rel="stylesheet" href="css/styles.css">
</head>
<body>
ย ยย
ย ย <div id="splash-screen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10001; transition: opacity 0.5s ease;">
ย ย ย ย <h1 style="font-size: 2.5em; margin-bottom: 30px; text-align: center;">Puberdade: Conhecendo as transformaรงรตes do meu corpo</h1>
ย ย ย ยย
ย ย ย ย <video id="intro-video" style="display: none; margin-bottom: 20px;" controls width="640" height="360">
ย ย ย ย ย ย <source src="video/Anime_Transformation_A_Teenager_s_Crisis.mp4" type="video/mp4">
ย ย ย ย ย ย Seu navegador nรฃo suporta a tag de vรญdeo.
ย ย ย ย </video>

ย ย ย ย <p id="splash-message" style="margin-bottom: 30px; opacity: 0.9;">Clique para ver a introduรงรฃo e iniciar o Game.</p>

ย ย ย ย <button id="start-button" style="padding: 15px 30px; font-size: 1.2em; background: #4CAF50; border: none; color: white; font-weight: bold; border-radius: 10px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3);">
ย ย ย ย ย ย โถ๏ธ Ver Introduรงรฃo
ย ย ย ย </button>
ย ย </div>

ย ย <div class="game-container">
ย ย ย ย <div class="sidebar">
ย ย ย ย ย ย <div class="stats">
ย ย ย ย ย ย ย ย <h3>๐ Conquistas do Jogador</h3>
ย ย ย ย ย ย ย ย <div class="stat-item">
ย ย ย ย ย ย ย ย ย ย <span>๐ง Conhecimento (Pts):</span>
ย ย ย ย ย ย ย ย ย ย <span id="knowledge">50</span>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div class="stat-item">
ย ย ย ย ย ย ย ย ย ย <span>๐ Medalhas Acumuladas:</span>
ย ย ย ย ย ย ย ย ย ย <span id="medals">0</span>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>
ย ย ย ย ย ยย
ย ย ย ย ย ย <div class="stats">
ย ย ย ย ย ย ย ย <h3>๐ Ganhar Conhecimento</h3>
ย ย ย ย ย ย ย ย <div class="job-option" onclick="doJob('readPubertyBook', 50, 6000, '๐ง')">
ย ย ย ย ย ย ย ย ย ย <div class="job-icon">๐</div>
ย ย ย ย ย ย ย ย ย ย <div class="job-info">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="job-name">Pesquisar/Ler sobre Puberdade</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="job-reward">+50 Conhecimento, +15 Autoestima (6s)</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="controls">
ย ย ย ย ย ย ย ย <button class="btn" onclick="resetRoom()">๐ Recomeรงar Jornada</button>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div class="main-content" id="main-content">
ย ย ย ย ย ย <div class="floating-particles">
ย ย ย ย ย ย ย ย <div class="particle">โจ</div>
ย ย ย ย ย ย ย ย <div class="particle">๐</div>
ย ย ย ย ย ย ย ย <div class="particle">๐ซ</div>
ย ย ย ย ย ย ย ย <div class="particle">โญ</div>
ย ย ย ย ย ย ย ย <div class="particle">๐ฎ</div>
ย ย ย ย ย ย ย ย <div class="particle">๐</div>
ย ย ย ย ย ย ย ย <div class="particle">๐</div>
ย ย ย ย ย ย ย ย <div class="particle">๐ฏ</div>
ย ย ย ย ย ย </div>
ย ย ย ย ย ยย
ย ย ย ย ย ย <div id="character-container">
ย ย ย ย ย ย ย ย <img id="boy-character" src="images/1000006911.png" alt="Garoto pronto para aprender" onclick="triggerRandomScenario()">ย
ย ย ย ย ย ย ย ย <div id="thought-bubble">Clique no garoto para aprender!</div>
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย </div>
ย ยย
ย ย <div class="message" id="message"></div>
ย ย <div id="success-animation-container">
ย ย ย ย <img id="sparkle-gif" src="images/sparkle.gif" alt="Animaรงรฃo de Sucesso" style="width: 100px; height: 100px; display: none; position: absolute; z-index: 100;">
ย ย </div>

ย ย <div id="question-modal">
ย ย ย ย <div id="modal-content">
ย ย ย ย ย ย <h3 id="modal-scenario-text"></h3>
ย ย ย ย ย ย <div id="modal-options-container"></div>
ย ย ย ย </div>
ย ย </div>

ย ย <button id="mute-button" onclick="toggleMute()">๐</button>

ย ย <audio id="background-music" loop muted volume="0.3">
ย ย ย ย <source src="audio/bgm.mp3" type="audio/mpeg">
ย ย </audio>
ย ย <audio id="sfx-click" muted>
ย ย ย ย <source src="audio/dice_roll.ogg" type="audio/ogg">
ย ย </audio>
ย ย <audio id="sfx-success" muted>
ย ย ย ย <source src="audio/coin.wav" type="audio/wav">
ย ย </audio>
ย ย <audio id="sfx-fail" muted>
ย ย ย ย <source src="audio/error.mp3" type="audio/mpeg">
ย ย </audio>
ย ย <audio id="sfx-win" muted>
ย ย ย ย <source src="audio/win.wav" type="audio/wav">
ย ย </audio>
ย ย <audio id="sfx-job-start" muted>
ย ย ย ย <source src="audio/move.mp3" type="audio/mpeg">
ย ย </audio>

ย ย <script>
ย ย ย ย let gameState = {
ย ย ย ย ย ย health: 70,
ย ย ย ย ย ย knowledge: 50,
ย ย ย ย ย ย confidence: 60,
ย ย ย ย ย ย hygiene: 65,
ย ย ย ย ย ย medals: 0,
ย ย ย ย ย ย activeJobs: new Map()
ย ย ย ย };
ย ย ย ยย
ย ย ย ย const bgMusic = document.getElementById('background-music');
ย ย ย ย const sfxClick = document.getElementById('sfx-click');
ย ย ย ย const sfxSuccess = document.getElementById('sfx-success');
ย ย ย ย const sfxFail = document.getElementById('sfx-fail');
ย ย ย ย const sfxWin = document.getElementById('sfx-win');
ย ย ย ย const sfxJobStart = document.getElementById('sfx-job-start');
ย ย ย ย const muteButton = document.getElementById('mute-button');
ย ย ย ย let isMuted = true;

ย ย ย ย bgMusic.volume = 0.3;

ย ย ย ย const boyCharacter = document.getElementById('boy-character');
ย ย ย ย const thoughtBubble = document.getElementById('thought-bubble');
ย ย ย ย const mainContent = document.getElementById('main-content');
ย ย ย ย const sparkleGif = document.getElementById('sparkle-gif');
ย ย ย ยย
ย ย ย ย // NOVAS REFERรNCIAS
ย ย ย ย const introVideo = document.getElementById('intro-video');
ย ย ย ย const startButton = document.getElementById('start-button');
ย ย ย ย const splashScreen = document.getElementById('splash-screen');
ย ย ย ย const splashMessage = document.getElementById('splash-message');


ย ย ย ย const imageMap = {
ย ย ย ย ย ย NEUTRAL: '1000006911.png',
ย ย ย ย ย ย HAPPY: '1000006910.png',
ย ย ย ย ย ย SAD: '1000006909.png'
ย ย ย ย };

ย ย ย ย // =================================================================
ย ย ย ย // === BANCO DE CENรRIOS ATUALIZADO (INรCIO) ===
ย ย ย ย // Este รฉ o bloco de cรณdigo que foi substituรญdo para
ย ย ย ย // incluir todas as novas perguntas.
ย ย ย ย // =================================================================
ย ย ย ย const scenarios = [
ย ย ย ย ย ย // --- Perguntas que jรก tinhas, agora atualizadas com o texto completo ---
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Meus pelos estรฃo crescendo, รฉ normal?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Sim! O crescimento de pelos corporais รฉ um sinal comum da puberdade causado por hormรดnios.", effects: { confidence: +20, knowledge: +25 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Fico preocupado e acho que รฉ falta de vitaminas ou algo errado.", effects: { confidence: -15, knowledge: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "A masturbaรงรฃo รฉ uma prรกtica normal na adolescรชncia?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Sim, รฉ normal e saudรกvel! ร uma forma de autoconhecimento e alรญvio de tensรฃo.", effects: { confidence: +20, knowledge: +25 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Sinto vergonha e acho que รฉ errado ou doentio.", effects: { confidence: -15, knowledge: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Minha voz estรก falhando e รs vezes eu fico rouco, o que รฉ isso?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "ร normal! A laringe estรก a crescer (muda vocal) e depois estabiliza. ร temporรกrio.", effects: { confidence: +20, knowledge: +20 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Fico envergonhado e evito falar. Deve ser uma infeรงรฃo.", effects: { confidence: -15, knowledge: -5 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Devo me comparar com meus amigos que jรก estรฃo mais desenvolvidos?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo! Cada pessoa tem seu prรณprio ritmo. A puberdade pode comeรงar em idades diferentes.", effects: { confidence: +25, knowledge: +20 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Sim, se eu for o รบltimo รฉ porque algo estรก errado comigo.", effects: { confidence: -20, health: -5 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Ter โsonhos molhadosโ ou acordar com a roupa รบmida รฉ normal?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Sim! Sรฃo as poluรงรตes noturnas. ร uma liberaรงรฃo natural de fluidos sexuais durante o sono.", effects: { confidence: +25, knowledge: +20 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo, isso รฉ muito estranho. Significa que fiz xixi na cama.", effects: { confidence: -15, knowledge: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "O orgasmo dura sempre o mesmo tempo para todas as pessoas?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo! O orgasmo รฉ muito variรกvel. A duraรงรฃo e a intensidade sรฃo diferentes para cada pessoa.", effects: { confidence: +10, knowledge: +20 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Sim, dura sempre 10 segundos. Se for diferente, algo estรก errado.", effects: { confidence: -5, knowledge: -5 }, sfx: 'fail' }
E ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Ter uma ereรงรฃo โdo nadaโ (sem pensar nisso) รฉ normal?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Sim! As ereรงรตes espontรขneas sรฃo comuns devido a hormรดnios ou reflexos nervosos. ร um sinal de corpo saudรกvel.", effects: { confidence: +25, knowledge: +25 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo, รฉ constrangedor e significa que estou sempre a ter pensamentos inadequados.", effects: { confidence: -20, knowledge: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "O que eu sinto nรฃo รฉ importante. Devo guardar tudo para mim?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo! Compartilhar sentimentos com alguรฉm de confianรงa รฉ fundamental para a sua saรบde mental.", effects: { confidence: +30, health: +15 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Sim, รฉ melhor ser forte e nรฃo incomodar os outros com meus problemas.", effects: { confidence: -20, health: -15 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },

ย ย ย ย ย ย // --- Novas Perguntas da Tua Lista (que nรฃo estavam no cรณdigo) ---
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Meu corpo estรก estranho โ o que รฉ isso?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "As mudanรงas corporais fazem parte da puberdade. Elas variam entre pessoas e levam tempo.", effects: { confidence: +20, knowledge: +20 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Deve ser algo que comi. O corpo nรฃo deve mudar tanto assim.", effects: { confidence: -10, knowledge: -5 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Por que estou sempre cansado ultimamente?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Durante a puberdade, o ciclo do sono muda e os hormรดnios estรฃo ativos. ร normal precisar de mais sono.", effects: { confidence: +15, health: +10 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Isso รฉ sรณ preguiรงa. Se dormires menos, o corpo acostuma.", effects: { confidence: -10, health: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "ร verdade que a gente comeรงa a transpirar mais intensamente?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Sim! As glรขndulas de suor ficam mais ativas. Um bom banho e desodorante ajudam.", effects: { hygiene: +20, knowledge: +15 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo, a transpiraรงรฃo รฉ igual a vida toda. Se estou a transpirar muito รฉ porque estou doente.", effects: { hygiene: -10, confidence: -10 }, sfx: 'fail' }
A ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย T ย ย ย ย ย text: "Eu choro por coisas bobas ou sinto raiva sem motivo. ร sรณ frescura?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo รฉ frescura! O cรฉrebro estรก em desenvolvimento e os hormรดnios causam flutuaรงรตes no humor.", effects: { confidence: +25, health: +10 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Sim, รฉ frescura. Pessoas fortes nรฃo choram por coisas bobas, tens de te controlar.", effects: { confidence: -20, health: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "ร obrigatรณrio ter um pรชnis grande para ser โhomemโ?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo! O tamanho varia muito e nรฃo define masculinidade. O importante รฉ ter um desenvolvimento saudรกvel.", effects: { confidence: +30, knowledge: +20 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Sim, o tamanho do pรชnis รฉ a caracterรญstica mais importante da masculinidade.", effects: { confidence: -25, knowledge: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },

ย ย ย ย ย ย // --- Perguntas que jรก tinhas no teu cรณdigo (cenรกrios de higiene/crescimento) ---
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Meus desodorantes nรฃo funcionam mais e estou suando muito. O que devo usar?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Trocar para um antitranspirante ou sabonete antibacteriano, pois o suor mudou na puberdade.", effects: { hygiene: +20, confidence: +15 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Lavar mais vezes com sabonete comum, ou usar produtos infantis.", effects: { hygiene: -10, confidence: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Minha voz quebra e nรฃo consigo cantar ou falar com clareza. Devo me preocupar?",
ย ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo, รฉ a 'muda vocal', temporรกria e normal. O processo รฉ de 6 meses a 2 anos.", effects: { knowledge: +25, confidence: +15 }, sfx: 'success' },
ย ย ย ย ย ย ย ย N ย ย { text: "Sim, devo parar de falar e cantar para nรฃo danificar minhas cordas vocais.", effects: { knowledge: -10, confidence: -5 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย },
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย text: "Estou crescendo muito rรกpido, pareรงo desajeitado e esbarro em tudo. Isso รฉ normal?",
A ย ย ย ย ย ย ย options: [
ย ย ย ย ย ย ย ย ย ย { text: "Sim! ร o 'estirรฃo' de crescimento; o corpo estรก se adaptando ao novo tamanho. A coordenaรงรฃo logo volta.", effects: { knowledge: +20, confidence: +20 }, sfx: 'success' },
ย ย ย ย ย ย ย ย ย ย { text: "Nรฃo! ร um sinal de que estou crescendo errado e preciso de sapatos ortopรฉdicos.", effects: { knowledge: -5, confidence: -10 }, sfx: 'fail' }
ย ย ย ย ย ย ย ย ]
ย ย ย ย ย ย }
ย ย ย ย ];
ย ย ย ย // =================================================================
ย ย ย ย // === BANCO DE CENรRIOS ATUALIZADO (FIM) ===
ย ย ย ย // =================================================================

ย ย ย ย // VARIรVEIS DE CONTROLE DE PERGUNTAS (Para evitar repetiรงรฃo)
ย ย ย ย let availableScenarios = [];
ย ย ย ยย
ย ย ย ย function shuffleArray(array) {
ย ย ย ย ย ย let currentIndex = array.length, randomIndex;
ย ย ย ย ย ย while (currentIndex != 0) {
ย ย ย ย ย ย ย ย randomIndex = Math.floor(Math.random() * currentIndex);
ย ย ย ย ย ย ย ย currentIndex--;
ย ย ย ย ย ย ย ย [array[currentIndex], array[randomIndex]] = [
ย ย ย ย ย ย ย ย ย ย array[randomIndex], array[currentIndex]];
ย ย ย ย ย ย }
ย ย ย ย ย ย return array;
ย ย ย ย }

ย ย ย ย function populateAvailableScenarios() {
ย ย ย ย ย ย availableScenarios = shuffleArray(scenarios.slice());
ย ย ย ย }
ย ย ย ยย
ย ย ย ย function animateSuccess() {
ย ย ย ย ย ย // Posiciona e mostra o GIF sobre o personagem
ย ย ย ย ย ย sparkleGif.style.top = `${boyCharacter.offsetTop - 50}px`;
ย ย ย ย ย ย sparkleGif.style.left = `${boyCharacter.offsetLeft + 50}px`;
ย ย ย ย ย ย sparkleGif.style.display = 'block';

ย ย ย ย ย ย // Esconde o GIF apรณs 1.5 segundos
ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย sparkleGif.style.display = 'none';
ย ย ย ย ย ย }, 1500);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // Removida a funรงรฃo watchVideo, pois o vรญdeo agora รฉ a introduรงรฃo

ย ย ย ย function playSound(soundName) {
ย ย ย ย ย ย if (isMuted) return;
ย ย ย ย ย ย const sounds = {ย
ย ย ย ย ย ย ย ย 'click': sfxClick,ย
ย ย ย ย ย ย ย ย 'success': sfxSuccess,ย
ย ย ย ย ย ย ย ย 'fail': sfxFail,ย
ย ย ย ย ย ย ย ย 'win': sfxWin,
ย ย ย ย ย ย ย ย 'job-start': sfxJobStartย
ย ย ย ย ย ย };
ย ย ย ย ย ย const sound = sounds[soundName];
ย ย ย ย ย ย if (sound) {
ย ย ย ย ย ย ย ย sound.currentTime = 0;
ย ย ย ย ย ย ย ย sound.load();ย
ย ย ย ย ย ย ย ย sound.play().catch(e => console.log('Audio play failed:', e));
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function toggleMute() {
ย ย ย ย ย ย isMuted = !isMuted;
ย ย ย ย ย ย const allAudios = [bgMusic, sfxClick, sfxSuccess, sfxFail, sfxWin, sfxJobStart];
ย ย ย ย ย ย allAudios.forEach(a => a.muted = isMuted);
ย ย ย ย ย ย muteButton.textContent = isMuted ? '๐' : '๐';
SI ย ย ย ย if (!isMuted) playMusic();
ย ย ย ย ย ย else bgMusic.pause();
ย ย ย ย }
ย ย ย ยย
ย ย ย ย function playMusic() {
ย ย ย ย ย ย if (isMuted) return;
ย ย ย ย ย ย bgMusic.currentTime = 0;
ย ย ย ย ย ย bgMusic.play().catch(e => console.log("Autoplay music failed:", e));
ย ย ย ย }

ย ย ย ย function setCharacterImage(imageName) {
ย ย ย ย ย ย boyCharacter.src = `images/${imageName}`;
E ย ย ย }

ย ย ย ย function updateScenario() {
ย ย ย ย ย ย if (gameState.medals >= 6) {
ย ย ย ย ย ย ย ย mainContent.className = 'main-content scenario-3';
ย ย ย ย ย ย ย ย showMessage("โจ Seu conhecimento atingiu o mรกximo!", false);
ย ย ย ย ย ย } else if (gameState.medals >= 3) {
ย ย ย ย ย ย ย ย mainContent.className = 'main-content scenario-2';
A ย ย ย ย }
ย ย ย ย }

ย ย ย ย function updateStats() {
ย ย ย ย ย ย document.getElementById('knowledge').textContent = Math.round(gameState.knowledge) + ' pts';
ย ย ย ย ย ย document.getElementById('medals').textContent = gameState.medals;
ย ย ย ย ย ย updateScenario();
ย ย ย ย }

ย ย ย ย function giveRewardItem() {
ย ย ย ย ย ย gameState.medals += 1;
ย ย ย ย ย ย applyEffects({ knowledge: 30, confidence: 15 });
ย ย ย ย ย ย showMessage('๐ PRรMIO! Vocรช ganhou uma Medalha!', false);
aS ย ย ย ย playSound('win');
ย ย ย ย ย ย updateStats();
ย ย ย ย }

ย ย ย ย function triggerRandomScenario() {
ย ย ย ย ย ย if (document.getElementById('question-modal').style.display === 'flex') {
ย ย ย ย ย ย ย ย showMessage("Responda primeiro!", true);
ย ย ย ย ย ย ย ย playSound('fail');
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย // Nรฃo precisa verificar o vรญdeo aqui, pois ele estarรก escondido apรณs a introduรงรฃo.

ย ย ย ย ย ย if (availableScenarios.length === 0) {
ย ย ย ย ย ย ย ย populateAvailableScenarios();
ย ย ย ย ย ย ย ย showMessage("๐ Vocรช esgotou o banco de dรบvidas! As perguntas foram resetadas.", false);
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย const scenario = availableScenarios.pop();
A ย ย ย ย ยย
ย ย ย ย ย ย showQuestionModal(scenario);
ย ย ย ย ย ย playSound('win');
ย ย ย ย ย ยย
ย ย ย ย ย ย boyCharacter.classList.remove('boy-happy', 'boy-sad');
ย ย ย ย ย ย setCharacterImage(imageMap.NEUTRAL);ย
ย ย ย ย ย ย boyCharacter.classList.add('boy-sad');ย
ย ย ย ย ย ย thoughtBubble.textContent = "Uau, preciso responder isso!";
ย ย ย ย }

ย ย ย ย function showQuestionModal(scenario) {
ย ย ย ย ย ย const modal = document.getElementById('question-modal');
ย ย ย ย ย ย const text = document.getElementById('modal-scenario-text');
ย ย ย ย ย ย const container = document.getElementById('modal-options-container');
ย ย ย ย ย ย text.textContent = scenario.text;
ย ย ย ย ย ย container.innerHTML = '';
ย ย ย ย ย ย scenario.options.forEach(option => {
ย ย ย ย ย ย ย ย const button = document.createElement('button');
ย ย ย ย ย ย ย ย button.className = 'modal-option';
ย ย ย ย ย ย ย ย button.textContent = option.text;
ย ย ย ย ย ย ย ย button.onclick = () => selectOption(option);
Container ย ย ย ย ย ย container.appendChild(button);
ย ย ย ย ย ย });
ย ย ย ย ย ย modal.style.display = 'flex';
ย ย ย ย }

ย ย ย ย function selectOption(option) {
ย ย ย ย ย ย applyEffects(option.effects);
ย ย ย ย ย ย document.getElementById('question-modal').style.display = 'none';
ย ย ย ย ย ย playSound(option.sfx);
ย ย ย ย ย ยย
ย ย ย ย ย ย const isCorrect = option.sfx === 'success';
ย ย ย ย ย ย const feedbackText = `${isCorrect ? 'โ Resposta Correta! Ganhou Conhecimento.' : 'โ Resposta Incorreta. Perdeu Confianรงa.'}`;
ย ย ย ย ย ย showMessage(feedbackText, !isCorrect);
ย ย ย ย ย ยย
ย ย ย ย ย ย boyCharacter.classList.remove('boy-happy', 'boy-sad');ย
ย ย ย ย ย ยย
ย ย ย ย ย ย if (isCorrect) {
ย ย ย ย ย ย ย ย animateSuccess();ย
ย ย ย ย ย ย ย ย setCharacterImage(imageMap.HAPPY);
ย ย ย ย ย ย ย ย boyCharacter.classList.add('boy-happy');
ย ย ย ย ย ย ย ย thoughtBubble.textContent = "Acertei! Me sinto um super-herรณi!";
aS ย ย ย ย ย ย giveRewardItem();
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย setCharacterImage(imageMap.SAD);
ย ย ย ย ย ย ย ย boyCharacter.classList.add('boy-sad');
ย ย ย ย ย ย ย ย thoughtBubble.textContent = "Que pena, essa dรบvida me deixou confuso.";
ย ย ย ย ย ย }

ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย boyCharacter.classList.remove('boy-happy', 'boy-sad');
CHAMADA ย ย ย ย ย ย setCharacterImage(imageMap.NEUTRAL);ย
ย ย ย ย ย ย ย ย thoughtBubble.textContent = "Clique no garoto para aprender!";
ย ย ย ย ย ย }, 3000);
ย ย ย ย ย ยย
ย ย ย ย ย ย updateStats();
ย ย ย ย }

ย ย ย ย function applyEffects(effects) {
ย ย ย ย ย ย Object.keys(effects).forEach(stat => {
ย ย ย ย ย ย ย ย if (gameState.hasOwnProperty(stat)) {
ย ย ย ย ย ย ย ย ย ย if (stat !== 'knowledge') {
CONTEรDO ย ย ย ย ย ย ย ย gameState[stat] = Math.max(0, Math.min(100, gameState[stat] + effects[stat]));
ย ย ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย ย ย gameState[stat] = Math.max(0, gameState[stat] + effects[stat]);
EFEITOS ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย }
ย ย _ ย ย ย });
ย ย ย ย }

ย ย ย ย function doJob(jobType, reward, duration, emoji) {
ย ย ย ย ย ย if (gameState.activeJobs.has(jobType)) {
ย ย ย ย ย ย ย ย showMessage("Aguarde, a pesquisa estรก em andamento!", true);
Player ย ย ย ย ย ย playSound('fail');ย
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย // Nรฃo precisa verificar o vรญdeo aqui.


Ambos ย ย ย ย ย gameState.activeJobs.set(jobType, true);
ย ย ย ย ย ย showMessage(`Iniciando ${emoji} Leitura...`);
ย ย ย ย ย ย playSound('job-start');
ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย applyEffects({ knowledge: reward, confidence: 15 });
ย ย ย ย ย ย ย ย showMessage(`Atividade concluรญda! +${reward} Conhecimento ๐ง`);
ย ย ย ย ย ย ย ย gameState.activeJobs.delete(jobType);
ย g ย ย ย ย ย updateStats();
ย ย ย ย ย ย }, duration);
ย ย ย ย }

ย ย ย ย function resetRoom() {
ย ย ย ย ย ย window.location.reload();
ย ย ย ย }

ย ย ย ย function showMessage(text, isError = false) {
ย ย ย ย ย ย const message = document.getElementById('message');
ย ย ย ย ย ย message.textContent = text;
ย ย ย ย ย ย message.className = 'message' + (isError ? ' error' : '');
ย ย ย ย ย ย message.classList.add('show');
ย ย ย ย ย ย setTimeout(() => message.classList.remove('show'), 6000);
ย ย ย ย }

ย ย ย ย // --- LรGICA DE INICIALIZAรรO CORRIGIDA PARA USAR O BOTรO ---
ย ย ย ย document.addEventListener('DOMContentLoaded', () => {
ย ย ย ย ย ยย
ย ย ย ย ย ย // AรรO DO BOTรO: Ativar o vรญdeo e o som com a interaรงรฃo do usuรกrio
CSS ย ย ย ย startButton.addEventListener('click', () => {
ย ย ย ย ย ย ย ย // 1. Esconde o botรฃo e a mensagem
ย ย ย ย ย ย ย ย startButton.style.display = 'none';
ย ย ย ย ย ย ย ย splashMessage.style.display = 'none';
g ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย // 2. Mostra e liga o vรญdeoย
ย ย ย ย ย ย ย ย introVideo.style.display = 'block';
ย ย ย ย ย ย ย ย introVideo.muted = false;ย

ย ย ย ย ย ย ย ย introVideo.play().catch(e => {
ย ย ย ย ย ย ย ย BETWEEN ย // Se o play falhar (raro apรณs o clique), dรก uma mensagem de erro
ย ย ย ย ย ย ย ย ย ย console.log("Erro ao iniciar a reproduรงรฃo apรณs o clique.", e);
ย ย ย ย ย ย ย ย ย ย splashMessage.textContent = "Erro ao iniciar. Tente novamente ou verifique as configuraรงรตes do navegador.";
ย ย ย ย ย ย ย ย ย ย splashMessage.style.display = 'block';
ย ย ย ย ย ย ย ย });

ย ย ย ย ย ย ย ย // Inicializa o som de fundo e os SFX (o jogo sรณ inicia apรณs o 'ended')
ย ย ย ย ย ย ย ย isMuted = false;
ย ย ย ย ย ย ย ย [bgMusic, sfxClick, sfxSuccess, sfxFail, sfxWin, sfxJobStart].forEach(a => a.muted = false);
ย ย ย ย ย ย });


ย ย ย ย ย ย // EVENTO CHAVE: O JOGO Sร INICIA QUANDO O VรDEO TERMINA
ย ย Z ย ย ย introVideo.addEventListener('ended', () => {
ย ย ย ย ย ย ย ย // Toca a mรบsica de fundo e inicia o jogo
ย ย ย ย ย ย ย ย playMusic();ย
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย // Remove a tela splash
ย ย ย ย ย ย ย ย splashScreen.style.opacity = '0';
ย ย ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย ย ย splashScreen.style.display = 'none';
Imagens ย ย ย ย ย ย ย ย initializeGame();ย
ย ย ย ย ย ย ย ย }, 500);
ย ย ย ย ย ย });
ย ย ย ย ย ยย
ย ย ย ย ย ย // Oculta os controles de vรญdeo antes de iniciar
ย ย ย ย ย ย introVideo.addEventListener('loadeddata', () => {
ย ย ย ย ย ย ย ย introVideo.controls = true;ย
ย s ย ย ย ย });
ย ย ย ย ย ยย
ย ย ย ย ย ย muteButton.textContent = isMuted ? '๐' : '๐';
ย ย ย ย });

ย ย ย ย function initializeGame() {
ย ย ย ย ย ย populateAvailableScenarios();ย
ย ย ย ย ย ย updateStats();
ย ย ย ย }
ย ย </script>
</body>
</html>
