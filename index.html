<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Jornada da Puberdade: Conhecendo as transforma√ß√µes do meu corpo</title>
    
    <link rel="stylesheet" href="css/styles.css">

</head>
<body>
    <div id="splash-screen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10001; transition: opacity 0.5s ease;">
        <h1 style="font-size: 2.5em; margin-bottom: 30px; text-align: center; max-width: 90%;">Puberdade: Conhecendo as transforma√ß√µes do meu corpo</h1>
        
        <video id="intro-video" style="display: none; margin-bottom: 20px;" controls width="640" height="360">
            <source src="video/Anime_Transformation_A_Teenager_s_Crisis.mp4" type="video/mp4">
            Seu navegador n√£o suporta a tag de v√≠deo.
        </video>

        <div id="intro-content" style="text-align: center; max-width: 600px; padding: 0 20px;">
            <p style="font-size: 1.2em; margin-bottom: 30px; opacity: 0.9;">
                Bem-vindo √† jornada de descoberta sobre as mudan√ßas que acontecem durante a puberdade! 
                Este √© um momento especial de crescimento e transforma√ß√£o.
            </p>
            <p style="margin-bottom: 30px; opacity: 0.8;">
                Voc√™ aprender√° sobre as mudan√ßas f√≠sicas e emocionais de forma divertiva e educativa atrav√©s de cen√°rios interativos.
            </p>
        </div>

        <button id="start-button" style="padding: 15px 30px; font-size: 1.2em; background: #4CAF50; border: none; color: white; font-weight: bold; border-radius: 10px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: all 0.3s ease;">
            ‚ñ∂Ô∏è Ver Introdu√ß√£o
        </button>
    </div>

    <button id="mute-button" onclick="toggleMute()">üîá</button>

    <div class="game-container">
        <div class="sidebar">
            <div class="stats">
                <h3>üèÜ Status do Jogador</h3>
                <div class="stat-item">
                    <span>üí™ Sa√∫de:</span>
                    <span id="health">70</span>
                </div>
                <div class="stat-item">
                    <span>üß† Conhecimento:</span>
                    <span id="knowledge">50</span>
                </div>
                <div class="stat-item">
                    <span>üòä Confian√ßa:</span>
                    <span id="confidence">60</span>
                </div>
                <div class="stat-item">
                    <span>üöø Higiene:</span>
                    <span id="hygiene">65</span>
                </div>
                <div class="stat-item">
                    <span>üèÖ Medalhas:</span>
                    <span id="medals">0</span>
                </div>
            </div>
            
            <div class="stats">
                <h3>üéØ Objetivos de Aprendizado</h3>
                <div style="font-size: 0.9em; line-height: 1.5;">
                    <p>‚Ä¢ Compreender as mudan√ßas f√≠sicas</p>
                    <p>‚Ä¢ Entender as mudan√ßas emocionais</p>
                    <p>‚Ä¢ Aprender sobre higiene pessoal</p>
                    <p>‚Ä¢ Desenvolver autoconfian√ßa</p>
                    <p>‚Ä¢ Aceitar as transforma√ß√µes naturais</p>
                </div>
            </div>
        </div>

        <main class="main-content" id="main-content">
            <div class="welcome-section" id="welcome-section">
                <h1>üåü Jornada da Puberdade</h1>
                <p>Descubra as transforma√ß√µes incr√≠veis que acontecem durante a puberdade atrav√©s de cen√°rios interativos e educativos!</p>
                <button class="start-game-btn" onclick="startGame()">üöÄ Come√ßar Aventura</button>
            </div>

            <div class="game-content" id="game-content">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                
                <div id="character-container" style="text-align: center; margin: 30px 0;">
                    <div style="position: relative; display: inline-block;">
                        <img id="boy-character" src="images/1000006911.png" alt="Garoto pronto para aprender" onclick="triggerRandomScenario()">
                        
                        <div id="thought-bubble">
                            Clique no garoto para aprender!
                        </div>
                    </div>
                </div>
                
                <div id="scenario-container"></div> 
            </div>
        </main>
    </div>

    <div class="medal-notification" id="medal-notification">
        <h2>üèÖ Parab√©ns!</h2>
        <p id="medal-text">Voc√™ ganhou uma medalha!</p>
        <button onclick="closeMedalNotification()" style="background: #4a90e2; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 15px;">Continuar</button>
    </div>

    <div class="message" id="message"></div>
    
    <div id="success-animation-container">
        <div id="sparkle-effect" style="width: 100px; height: 100px; display: none; font-size: 4em;">‚ú®</div>
    </div>

    <div id="question-modal">
        <div id="modal-content">
            <h3 id="modal-scenario-text"></h3>
            <div id="modal-options-container"></div>
        </div>
    </div>

    <audio id="background-music" loop muted volume="0.3">
        <source src="audio/bgm.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-click" muted>
        <source src="audio/dice_roll.ogg" type="audio/ogg">
    </audio>
    <audio id="sfx-success" muted>
        <source src="audio/coin.wav" type="audio/wav">
    </audio>
    <audio id="sfx-fail" muted>
        <source src="audio/error.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-win" muted>
        <source src="audio/win.wav" type="audio/wav">
    </audio>


    <script>
        // --- ESTADO INICIAL DO JOGO ---
        let gameState = {
            health: 70, knowledge: 50, confidence: 60, hygiene: 65, medals: 0
        };
        let currentScenario = 0;
        
        // --- VARI√ÅVEIS DE CONTROLO DE M√çDIA ---
        let soundEnabled = true; // Controla EFEITOS VISUAIS
        let isMuted = true; // Controla √ÅUDIO
        
        // --- REFER√äNCIAS AOS ELEMENTOS HTML (CACHE) ---
        const bgMusic = document.getElementById('background-music');
        const sfxClick = document.getElementById('sfx-click');
        const sfxSuccess = document.getElementById('sfx-success');
        const sfxFail = document.getElementById('sfx-fail');
        const sfxWin = document.getElementById('sfx-win');
        const muteButton = document.getElementById('mute-button');
        
        const introVideo = document.getElementById('intro-video');
        const startButton = document.getElementById('start-button');
        const splashScreen = document.getElementById('splash-screen');
        const introContent = document.getElementById('intro-content'); // Refer√™ncia ao texto intro
        const sparkleEffect = document.getElementById('sparkle-effect'); 
        const boyCharacter = document.getElementById('boy-character');
        const thoughtBubble = document.getElementById('thought-bubble');
        const welcomeSection = document.getElementById('welcome-section');
        const gameContent = document.getElementById('game-content');
        const scenarioContainer = document.getElementById('scenario-container');
        const modal = document.getElementById('question-modal');
        const modalScenarioText = document.getElementById('modal-scenario-text');
        const modalOptionsContainer = document.getElementById('modal-options-container');
        const messageDiv = document.getElementById('message');
        const medalNotificationDiv = document.getElementById('medal-notification');
        const medalTextSpan = document.getElementById('medal-text');
        const healthSpan = document.getElementById('health');
        const knowledgeSpan = document.getElementById('knowledge');
        const confidenceSpan = document.getElementById('confidence');
        const hygieneSpan = document.getElementById('hygiene');
        const medalsSpan = document.getElementById('medals');
        const progressFillDiv = document.getElementById('progress-fill');
        
        // --- MAPA DE IMAGENS DO PERSONAGEM ---
        const imageMap = {
            NEUTRAL: 'images/1000006911.png',
            HAPPY: 'images/1000006910.png',
            SAD: 'images/1000006909.png'
        };

        // --- CEN√ÅRIOS/PERGUNTAS ---
        const scenarios = [
            // Cola aqui TODOS os teus 46 cen√°rios. 
            // Exemplo:
            {
                text: "Qual o erro mais comum ao usar um preservativo masculino e como corrigi-lo?",
                options: [
                    { 
                        text: "N√£o verificar o prazo de validade antes de usar.", 
                        effects: { knowledge: +5, confidence: +5 }, 
                        feedback: "Verificar o prazo √© importante, mas o erro mais comum √© n√£o retirar o ar da ponta do preservativo antes de desenrol√°-lo no p√™nis.",
                        correct: false
                    },
                    { 
                        text: "N√£o retirar o ar da ponta do preservativo antes de desenrol√°-lo.", 
                        effects: { knowledge: +20, confidence: +15 }, 
                        feedback: "Correto! O erro mais comum √© n√£o retirar o ar da ponta do preservativo...",
                        correct: true
                    }
                ]
            },
            // ... (restantes 45 cen√°rios) ...
            {
                text: "Verdade ou Mito: O sexo anal √© uma pr√°tica de baixo risco para a transmiss√£o de IST...",
                options: [
                    { 
                        text: "MITO. O sexo anal √© de alto risco...", 
                        effects: { knowledge: +25, health: +20 }, 
                        feedback: "Correto! √â MITO...",
                        correct: true
                    },
                    { 
                        text: "VERDADE. O sexo anal tem menor risco...", 
                        effects: { knowledge: -25, health: -25 }, 
                        feedback: "√â MITO! O sexo anal tem MAIOR risco...",
                        correct: false
                    }
                ]
            }
        ];

        // --- FUN√á√ïES DE √ÅUDIO ---
        function playSound(soundName) {
            if (isMuted) return;
            const sounds = { 
                'click': sfxClick, 'success': sfxSuccess, 'fail': sfxFail, 'win': sfxWin
            };
            const sound = sounds[soundName];
            if (sound) {
                sound.currentTime = 0; // Reinicia o √°udio
                // sound.load(); // N√£o √© geralmente necess√°rio com play()
                sound.play().catch(e => console.error('Audio play failed:', e));
            }
        }

        function toggleMute() {
            isMuted = !isMuted;
            soundEnabled = !soundEnabled; // Sincroniza efeitos visuais com √°udio
            
            const allAudios = [bgMusic, sfxClick, sfxSuccess, sfxFail, sfxWin];
            allAudios.forEach(a => a.muted = isMuted);
            
            muteButton.textContent = isMuted ? 'üîá' : 'üîä';
            
            if (!isMuted) {
                playMusic(); // Tenta tocar a m√∫sica se desmutar
                showNotification('üîä √Åudio e efeitos visuais ativados!', 'success');
            } else {
                bgMusic.pause(); // Pausa a m√∫sica se mutar
                showNotification('üîá √Åudio e efeitos visuais desativados', 'info');
            }
        }

        function playMusic() {
            if (isMuted || !bgMusic.paused) return; // N√£o toca se j√° estiver tocando
            bgMusic.currentTime = 0;
            bgMusic.play().catch(e => console.error("Autoplay music failed:", e));
        }
        
        // --- FUN√á√ïES DE EFEITOS VISUAIS (CSS) ---
        function playVisualEffect(type) {
            if (!soundEnabled) return; 
            const gameContainer = document.querySelector('.game-container'); // Precisa da refer√™ncia aqui
            
            switch(type) {
                case 'success':
                    createSuccessEffect(gameContainer); // Passa a refer√™ncia
                    break;
                case 'fail':
                    createErrorEffect(gameContainer); // Passa a refer√™ncia
                    break;
                case 'win':
                    createWinEffect(gameContainer); // Passa a refer√™ncia
                    break;
                default: // 'click'
                    createClickEffect();
            }
        }

        function createSuccessEffect(gameContainer) { // Recebe gameContainer
            const overlay = document.createElement('div');
            overlay.className = 'success-overlay';
            document.body.appendChild(overlay);
            
            gameContainer.classList.add('success-glow');
            
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    createSparkle();
                    if (i % 2 === 0) createDiamond();
                }, i * 100);
            }
            
            setTimeout(() => {
                overlay.remove();
                gameContainer.classList.remove('success-glow');
            }, 2000);
        }

        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.textContent = Math.random() > 0.5 ? '‚ú®' : '‚≠ê';
            sparkle.style.left = `${Math.random() * 100}vw`; // Usa vw/vh para cobrir a tela
            sparkle.style.top = `${Math.random() * 100}vh`;
            document.body.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 2000);
        }

        function createDiamond() {
            const diamond = document.createElement('div');
            diamond.className = 'diamond';
            diamond.textContent = Math.random() > 0.5 ? 'üíé' : 'üí†';
            diamond.style.left = `${Math.random() * 100}vw`;
            diamond.style.top = `${Math.random() * 100}vh`;
            document.body.appendChild(diamond);
            setTimeout(() => diamond.remove(), 2500);
        }

        function createErrorEffect(gameContainer) { // Recebe gameContainer
            gameContainer.classList.add('shake-screen');
            
            const crackOverlay = document.createElement('div');
            crackOverlay.className = 'crack-overlay';
            document.body.appendChild(crackOverlay);
            
            gameContainer.classList.add('error-flash');
            
            for (let i = 0; i < 8; i++) {
                setTimeout(createCrackLine, i * 100);
            }
            
            setTimeout(() => {
                gameContainer.classList.remove('shake-screen', 'error-flash');
                crackOverlay.remove();
            }, 1500);
        }

        function createCrackLine() {
            const crack = document.createElement('div');
            crack.className = 'crack-line';
            
            const isVertical = Math.random() > 0.5;
            if (isVertical) {
                crack.style.width = '2px';
                crack.style.height = `${Math.random() * 200 + 50}px`;
            } else {
                crack.style.width = `${Math.random() * 200 + 50}px`;
                crack.style.height = '2px';
            }
            crack.style.left = `${Math.random() * 100}vw`;
            crack.style.top = `${Math.random() * 100}vh`;
            
            document.body.appendChild(crack);
            setTimeout(() => crack.remove(), 1000);
        }

        function createWinEffect(gameContainer) { // Recebe gameContainer
            createSuccessEffect(gameContainer); // Usa o efeito base
            setTimeout(() => {
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        createSparkle();
                        createDiamond();
                    }, i * 50);
                }
            }, 500); // Adiciona mais brilho depois
        }

        function createClickEffect() {
            // Este n√£o precisa do gameContainer, √© um pop-up simples
            const effect = document.createElement('div');
            effect.style.cssText = `
                position: fixed; top: 50%; left: 50%;
                transform: translate(-50%, -50%);
                font-size: 3em; z-index: 9999;
                pointer-events: none;
                animation: effectPop 1s ease forwards;
                color: #4a90e2;
            `;
            effect.textContent = '‚≠ê';
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 1000);
        }
        
        // --- FUN√á√ïES DE FEEDBACK VISUAL ---
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 80px; right: 20px;
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#4a90e2'};
                color: white; padding: 15px 20px; border-radius: 10px;
                z-index: 9999; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => notification.remove(), 300); // Remove ap√≥s anima√ß√£o
            }, 3000); // Dura√ß√£o da notifica√ß√£o
        }

        function showMessage(text) {
            messageDiv.textContent = text;
            messageDiv.style.display = 'block';
            // Usa classes CSS para anima√ß√£o (se existirem no styles.css)
            // messageDiv.classList.add('show'); 
            
            setTimeout(() => {
                 messageDiv.style.display = 'none';
                 // messageDiv.classList.remove('show');
            }, 4000); // Dura√ß√£o da mensagem
        }

        // --- FUN√á√ïES DE CONTROLO DO JOGO ---
        function startGame() {
            welcomeSection.style.display = 'none'; // Esconde a sec√ß√£o de boas-vindas
            gameContent.style.display = 'block'; // Mostra o conte√∫do principal do jogo
            updateThoughtBubble("Clique em mim para uma nova d√∫vida!");
        }

        function triggerRandomScenario() {
            if (currentScenario >= scenarios.length) {
                showMessage("Parab√©ns! Voc√™ respondeu a todas as d√∫vidas!");
                showFinalResults(); // Mostra os resultados se j√° acabou
                return;
            }
            
            playSound('click'); 
            playVisualEffect('click'); 
            showScenarioModal(); // Abre o modal com a pergunta
        }

        function showScenarioModal() {
            const scenario = scenarios[currentScenario];
            
            modalScenarioText.textContent = scenario.text;
            modalOptionsContainer.innerHTML = ''; // Limpa op√ß√µes anteriores
            
            // Cria os bot√µes de op√ß√£o dinamicamente
            scenario.options.forEach((option, index) => {
                const button = document.createElement('button');
                // Adiciona estilos inline (poderiam estar no CSS)
                button.style.cssText = `
                    display: block; width: 100%; margin: 10px 0; padding: 15px; 
                    background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; 
                    cursor: pointer; text-align: left; font-size: 1.1em; 
                    transition: all 0.3s ease;
                `;
                button.textContent = option.text;
                button.onclick = () => selectModalOption(index);
                // Efeito hover simples
                button.onmouseover = () => { button.style.background='#e3f2fd'; button.style.borderColor='#4a90e2'; };
                button.onmouseout = () => { button.style.background='#f8f9fa'; button.style.borderColor='#e9ecef'; };
                
                modalOptionsContainer.appendChild(button);
            });
            
            modal.style.display = 'flex'; // Mostra o modal
        }

        function selectModalOption(selectedIndex) {
            const scenario = scenarios[currentScenario];
            const option = scenario.options[selectedIndex];
            
            // Aplica os efeitos da op√ß√£o escolhida ao estado do jogo
            Object.keys(option.effects).forEach(stat => {
                // Limita os stats entre 0 e 100 (exceto conhecimento, talvez?)
                gameState[stat] = Math.max(0, Math.min(100, gameState[stat] + option.effects[stat]));
            });

            updateStats(); // Atualiza a sidebar
            
            // Feedback imediato e efeitos
            if (option.correct) {
                changeCharacterExpression('HAPPY');
                showMessage("üéâ " + option.feedback); // Mostra o feedback positivo
                playSound('success'); 
                playVisualEffect('success'); 
                showSparkleAnimation(); // Mostra o brilho ‚ú®
                
                // Verifica se ganhou medalhas
                checkMedals(); 
            } else {
                changeCharacterExpression('SAD');
                showMessage("ü§î " + option.feedback); // Mostra o feedback construtivo
                playSound('fail'); 
                playVisualEffect('fail'); 
            }
            
            currentScenario++; // Avan√ßa para o pr√≥ximo cen√°rio
            updateProgress(); // Atualiza a barra de progresso
            updateThoughtBubble(getRandomThought()); // Muda o pensamento do personagem
            
            modal.style.display = 'none'; // Esconde o modal
            
            // Verifica se o jogo terminou
            if (currentScenario >= scenarios.length) {
                setTimeout(showFinalResults, 2000); // Mostra resultados ap√≥s um delay
            }
        }

        // --- FUN√á√ïES DE ATUALIZA√á√ÉO DA INTERFACE ---
        function setCharacterImage(imageName) {
             boyCharacter.src = imageName; 
        }

        function changeCharacterExpression(expression) {
            let imageName;
            let gradient; // Fundo do c√≠rculo da imagem
            
            switch(expression) {
                case 'HAPPY':
                    imageName = imageMap.HAPPY;
                    gradient = 'linear-gradient(135deg, #4CAF50, #45a049)';
                    break;
                case 'SAD':
                    imageName = imageMap.SAD;
                    gradient = 'linear-gradient(135deg, #f44336, #d32f2f)';
                    break;
                default: // NEUTRAL
                    imageName = imageMap.NEUTRAL;
                    gradient = 'linear-gradient(135deg, #4a90e2, #357abd)';
            }
            setCharacterImage(imageName);
            boyCharacter.style.background = gradient; // Atualiza o fundo
            
            // Temporizador para voltar ao neutro
            setTimeout(() => {
                setCharacterImage(imageMap.NEUTRAL);
                boyCharacter.style.background = 'linear-gradient(135deg, #4a90e2, #357abd)';
            }, 3000); // Volta ao normal ap√≥s 3 segundos
        }
        
        // Fun√ß√£o para mostrar a anima√ß√£o ‚ú®
        function showSparkleAnimation() {
            sparkleEffect.style.display = 'block';
            sparkleEffect.style.animation = 'sparkleAnimation 1s ease'; // Reinicia a anima√ß√£o
            
            // Esconde ap√≥s a anima√ß√£o terminar
            setTimeout(() => {
                sparkleEffect.style.display = 'none';
                sparkleEffect.style.animation = 'none'; // Prepara para a pr√≥xima vez
            }, 1000);
        }

        function updateThoughtBubble(text) {
            thoughtBubble.textContent = text;
        }

        function getRandomThought() {
            const thoughts = [
                "Que interessante!", "Aprendi algo novo!", "A puberdade tem destas coisas...",
                "Pr√≥xima d√∫vida!", "Vamos continuar!", "Conhecimento √© poder!"
            ];
            return thoughts[Math.floor(Math.random() * thoughts.length)];
        }

        function updateStats() {
            healthSpan.textContent = gameState.health;
            knowledgeSpan.textContent = gameState.knowledge;
            confidenceSpan.textContent = gameState.confidence;
            hygieneSpan.textContent = gameState.hygiene;
            medalsSpan.textContent = gameState.medals;
        }

        function updateProgress() {
            const progress = (currentScenario / scenarios.length) * 100;
            progressFillDiv.style.width = `${progress}%`;
        }

        // --- FUN√á√ïES DE MEDALHAS E FIM DE JOGO ---
         function checkMedals() {
            // L√≥gica simples: uma medalha a cada X pontos ou por marco
            if (gameState.knowledge >= 80 && gameState.medals === 0) {
                 setTimeout(() => awardMedal("S√°bio Iniciante! ü•â"), 500); // Pequeno delay
            } else if (gameState.confidence >= 80 && gameState.medals === 1) {
                 setTimeout(() => awardMedal("Confian√ßa em Alta! ü•à"), 500);
            } else if (gameState.hygiene >= 85 && gameState.medals === 2) {
                 setTimeout(() => awardMedal("Mestre da Limpeza! ü•á"), 500);
            }
            // Adicionar mais condi√ß√µes para mais medalhas se quiser
        }

        function awardMedal(medalText) {
            if (medalNotificationDiv.style.display === 'block') return; // Evita m√∫ltiplas notifica√ß√µes

            gameState.medals++;
            updateStats(); // Atualiza o contador na sidebar
            medalTextSpan.textContent = medalText; // Define o texto da notifica√ß√£o
            medalNotificationDiv.style.display = 'block'; // Mostra a notifica√ß√£o
            playSound('win'); 
            playVisualEffect('win'); 
        }

        function closeMedalNotification() {
            medalNotificationDiv.style.display = 'none';
        }

        function showFinalResults() {
            let performance = '';
            const totalScore = gameState.health + gameState.knowledge + gameState.confidence + gameState.hygiene;
            
            // Define a mensagem de performance baseada na pontua√ß√£o total
            if (totalScore >= 320) performance = 'Excelente! Voc√™ domina o assunto! üåü';
            else if (totalScore >= 280) performance = 'Muito bom! Quase um expert! üëè';
            else if (totalScore >= 240) performance = 'Bom trabalho! Continue aprendendo! üí™';
            else performance = 'Voc√™ come√ßou a jornada! Continue explorando! üìö';

            // Cria o HTML para mostrar os resultados finais
            scenarioContainer.innerHTML = `
                <div class="question-card">
                    <h2>üéä Parab√©ns! Jornada Conclu√≠da!</h2>
                    <div style="text-align: center; padding: 20px;">
                        <h3>${performance}</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0; text-align: left;">
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;"><strong>üí™ Sa√∫de:</strong> ${gameState.health}</div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;"><strong>üß† Conhecimento:</strong> ${gameState.knowledge}</div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;"><strong>üòä Confian√ßa:</strong> ${gameState.confidence}</div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;"><strong>üöø Higiene:</strong> ${gameState.hygiene}</div>
                        </div>
                        <p style="font-size: 1.2em; margin: 20px 0;"><strong>üèÖ Medalhas: ${gameState.medals}</strong></p>
                        <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: left;">
                            <h4>üéØ Revis√£o R√°pida:</h4>
                            <p>‚Ä¢ A puberdade √© normal e saud√°vel.</p>
                            <p>‚Ä¢ Mudan√ßas f√≠sicas e emocionais acontecem.</p>
                            <p>‚Ä¢ Higiene √© chave!</p>
                            <p>‚Ä¢ Aceite as transforma√ß√µes.</p>
                            <p>‚Ä¢ Informe-se sempre!</p>
                        </div>
                        <button onclick="restartGame()" class="start-game-btn" style="background: linear-gradient(45deg, #4CAF50, #45a049);">üîÑ Jogar Novamente</button>
                    </div>
                </div>
            `;
            
            updateProgress(); // Garante que a barra chegue a 100%
            playSound('win'); 
            playVisualEffect('win'); 
        }

        function restartGame() {
            currentScenario = 0;
            gameState = { // Reinicia o estado do jogo
                health: 70, knowledge: 50, confidence: 60, hygiene: 65, medals: 0
            };
            updateStats(); // Atualiza a sidebar
            progressFillDiv.style.width = '0%'; // Reinicia a barra de progresso
            scenarioContainer.innerHTML = ''; // Limpa a √°rea de cen√°rios
            updateThoughtBubble("Vamos de novo! Clique em mim.");
            // N√£o precisa mexer no welcomeSection ou gameContent, eles j√° est√£o no estado certo
        }

        // --- INICIALIZA√á√ÉO DO JOGO ---

        // Evento: Clicar no bot√£o "Ver Introdu√ß√£o"
        startButton.addEventListener('click', () => {
            introContent.style.display = 'none'; // Esconde texto intro
            startButton.style.display = 'none'; // Esconde bot√£o intro
            introVideo.style.display = 'block'; // Mostra v√≠deo
            
            introVideo.muted = false; // Tira o mute do v√≠deo
            introVideo.play().catch(e => {
                console.error("Video play failed:", e);
                // Se o v√≠deo falhar, esconde o splash e inicia o jogo diretamente
                splashScreen.style.opacity = '0';
                setTimeout(() => { splashScreen.style.display = 'none'; }, 500);
                startGame(); // Chama o in√≠cio do jogo sem o v√≠deo
            });

            // Ativa os √°udios do jogo (mas ainda n√£o toca a m√∫sica de fundo)
            isMuted = false;
            soundEnabled = true; 
            [bgMusic, sfxClick, sfxSuccess, sfxFail, sfxWin].forEach(a => a.muted = false);
            muteButton.textContent = 'üîä'; // Atualiza o bot√£o de mute
        });

        // Evento: V√≠deo terminou de tocar
        introVideo.addEventListener('ended', () => {
            // Esconde o ecr√£ splash com fade out
            splashScreen.style.opacity = '0';
            setTimeout(() => { splashScreen.style.display = 'none'; }, 500); // Remove ap√≥s transi√ß√£o
            
            playMusic(); // Agora sim, toca a m√∫sica de fundo
            startGame(); // Inicia a interface principal do jogo
        });
        
        // Garante que os controlos do v√≠deo apare√ßam quando carregado
        introVideo.addEventListener('loadeddata', () => {
            introVideo.controls = true; 
        });
        
        // --- C√ìDIGO EXECUTADO QUANDO A P√ÅGINA CARREGA ---
        muteButton.textContent = isMuted ? 'üîá' : 'üîä'; // Define estado inicial do bot√£o mute
        updateStats(); // Mostra os stats iniciais na sidebar
        // Nota: startGame() s√≥ √© chamado ap√≥s o v√≠deo ou se o v√≠deo falhar.
        
    </script>
</body>
</html>
